<!-- Extends from base.html -->
{% extends 'base.html' %} {% block title %}Coded Together Home{% endblock title
%} {%block content %}


<br />

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <h2>My projects</h2>
      <ul class="list-group list-group-flush" id="project_owned">
        {% for project in user.project_owned %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ project.name}}</div>
            {{ project.description}}
          </div>
          <span class="badge bg-secondary rounded-pill">{{project.date}}</span>
          <button type="button" class="btn btn-outline-success btn-sm mr-3">Completed ?</button>

          <form method = "POST" action="/delete_project"><input name="project_id" value="{{ project.id }}" type ="hidden" />
            <button type="submit" class="btn btn btn-outline-danger btn-sm" >Delete</button>
        </form>
        </li>
        {% endfor%}
      </ul>
    </div>
    <div class="text-center col-6 col-md-4">
      <h2>Post a Project</h2>
      <br />
      <div class="mb-3">
            <form method="POST" action="/">
          <textarea
            name="project_title"
            id="project_title"
            class="form-control"
            rows="1"
            placeholder="Enter your project title"
          ></textarea>
          <br />
          <textarea
            name="project_details"
            id="project_details"
            class="form-control"
            rows="3"
            placeholder="Enter project details"
          ></textarea>
        </div>
        <br />
        <div align="center">
          <button type="submit" class="btn btn-primary">Post</button>
        </div>
      </form>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col align-self-start">
      <h2>Projects Community</h2>
      <ul class="list-group list-group-flush" id="name">
        {% for project in all_projects%}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ project.name}}</div>
            {{ project.description}}
          </div>
          <span class="badge bg-primary rounded-pill">{{project.date}}</span>
        </li>
        <div>
          {% for member in project.members%}
          <div class="col align-self-center">{{member.first_name}}</div>
          {% endfor %}
        </div>
        <div class = "container text-center pt-3">
          <div class = "row">
            <div class ="col align-self-end">
              <form method = "POST" action="/join_project"><input name="project_id" value="{{ project.id }}" type ="hidden" />
                <button type="submit" class="btn btn btn-outline-success btn-sm mb-2" >Join</button>

            </form>
            </div>
    </div>
    </div>
        {% endfor%}
      </ul>
    </div>
  </div>
</div>

{% endblock %}
